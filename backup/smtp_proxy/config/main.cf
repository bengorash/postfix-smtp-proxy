# Minimal Postfix configuration
myhostname = smtp.togotrek.com
mydomain = togotrek.com
myorigin = $mydomain
inet_interfaces = all
inet_protocols = ipv4
mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain
mynetworks = 127.0.0.0/8, 172.0.0.0/8, 192.168.0.0/16, 10.0.0.0/8, 209.85.128.0/17, 216.239.32.0/19, 64.233.160.0/19, 66.249.80.0/20, 72.14.192.0/18, 74.125.0.0/16, 108.177.8.0/21, 173.194.0.0/16

# Set maillog file
maillog_file = /var/log/postfix/postfix.log

# Enable TLS for incoming connections
smtpd_tls_cert_file = /etc/postfix/cert.pem
smtpd_tls_key_file = /etc/postfix/key.pem
smtpd_tls_security_level = may
smtpd_tls_loglevel = 1

# Relay to Gmail
relayhost = [smtp.gmail.com]:587
smtp_use_tls = yes
smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options = noanonymous

# Allow Gmail to relay through us
smtpd_recipient_restrictions =
    permit_mynetworks,
    permit_sasl_authenticated,
    reject_unauth_destination

# Gmail IP ranges (add these to mynetworks)


# Other required settings
biff = no
compatibility_level = 2

# Increase max hop count
hopcount_limit = 50